# 爱心手势Web应用 - 部署架构图

## 系统架构概览

```
┌─────────────────────────────────────────────────────────────────┐
│                         用户浏览器                                │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  打开网页 → 请求加载 → 显示界面 → 授权摄像头 → 开始使用   │   │
│  └─────────────────────────────────────────────────────────┘   │
└───────────────────────────┬─────────────────────────────────────┘
                            │ HTTPS
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                      静态资源托管平台                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  • index.html (入口文件)                                  │   │
│  │  • assets/                                               │   │
│  │    - index-xxx.js (主程序代码)                            │   │
│  │    - index-xxx.css (样式文件)                             │   │
│  │  • mediapipe/ (AI模型文件)                                │   │
│  │    - hands.js                                            │   │
│  │    - hand_landmark_*.tflite                              │   │
│  │    - *.wasm (WebAssembly)                                │   │
│  │  • heart.svg (图标)                                       │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                            │
                            │ WebRTC / getUserMedia
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                        用户设备摄像头                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  实时视频流 → MediaPipe Hands处理 → 手势识别结果          │   │
│  │                                                          │   │
│  │  检测到的手势:                                           │   │
│  │  • 单指(食指) → 绘制轨迹                                  │   │
│  │  • 双指(拇指+食指) → 缩放 + 旋转控制                      │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                            │
                            │ Three.js渲染
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                        WebGL 3D渲染                              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  用户轨迹 → 3D爱心几何体 → 场景渲染 → 显示到Canvas        │   │
│  │                                                          │   │
│  │  交互控制:                                               │   │
│  │  • 捏合手势 → 缩放爱心                                    │   │
│  │  • 手指移动 → 旋转爱心                                    │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

## 部署流程图

```
                    开始部署
                       │
                       ▼
              ┌─────────────────┐
              │   代码开发完成    │
              │   本地测试通过    │
              └────────┬────────┘
                       │
                       ▼
              ┌─────────────────┐
              │   npm run build  │
              │   构建生产包      │
              └────────┬────────┘
                       │
                       ▼
              ┌─────────────────┐
              │   检查dist文件夹  │
              │   确认文件完整    │
              └────────┬────────┘
                       │
           ┌───────────┼───────────┐
           │           │           │
           ▼           ▼           ▼
    ┌──────────┐ ┌──────────┐ ┌──────────┐
    │GitHub    │ │ Vercel   │ │ 自有服务器 │
    │Pages     │ │          │ │          │
    └────┬─────┘ └────┬─────┘ └────┬─────┘
         │            │            │
         ▼            ▼            ▼
    ┌──────────┐ ┌──────────┐ ┌──────────┐
    │推送到仓库 │ │连接GitHub│ │上传文件  │
    │启用Pages │ │自动部署  │ │配置Nginx │
    └────┬─────┘ └────┬─────┘ └────┬─────┘
         │            │            │
         └────────────┼────────────┘
                      │
                      ▼
              ┌─────────────────┐
              │   获取HTTPS链接   │
              │   分享给用户      │
              └────────┬────────┘
                       │
                       ▼
              ┌─────────────────┐
              │   用户打开网页    │
              │   授权摄像头      │
              │   开始使用        │
              └─────────────────┘
```

## 推荐部署方案对比

```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│   特性      │ GitHub Pages│   Vercel    │   Netlify   │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 费用        │    免费     │    免费     │    免费     │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 自动部署    │     ✓       │     ✓       │     ✓       │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ HTTPS       │     ✓       │     ✓       │     ✓       │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 自定义域名  │     ✓       │     ✓       │     ✓       │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 部署难度    │    简单     │    简单     │    简单     │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 国内访问    │    一般     │    一般     │    一般     │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 适合场景    │  个人项目   │  前端项目   │  快速部署   │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

## 数据流向图

```
┌─────────────────────────────────────────────────────────────┐
│                         用户交互层                            │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ 举起食指  │  │ 画出轨迹  │  │ 检测爱心  │  │ 显示3D   │    │
│  │ 开始绘制  │→ │ 记录坐标  │→ │ 形状识别  │→ │ 爱心模型  │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
│                                                              │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ 双指捏合  │  │ 计算距离  │  │ 缩放模型  │  │ 实时更新  │    │
│  │ 控制缩放  │→ │ 比例变化  │→ │ 平滑过渡  │→ │ 渲染显示  │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
│                                                              │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ 双指移动  │  │ 计算位移  │  │ 旋转模型  │  │ 实时更新  │    │
│  │ 控制旋转  │→ │ 方向判断  │→ │ 角度计算  │→ │ 渲染显示  │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                         技术实现层                            │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │                  MediaPipe Hands                       │  │
│  │  手部关键点检测 → 手势识别 → 坐标输出                    │  │
│  └──────────────────────────────────────────────────────┘  │
│                              │
                              ▼
│  ┌──────────────────────────────────────────────────────┐  │
│  │                  Three.js                              │  │
│  │  3D场景 → 爱心几何体 → 材质光照 → 渲染输出              │  │
│  └──────────────────────────────────────────────────────┘  │
│                              │
                              ▼
│  ┌──────────────────────────────────────────────────────┐  │
│  │                  WebGL Canvas                          │  │
│  │  实时渲染 → 显示到屏幕                                  │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## 核心模块依赖关系

```
┌─────────────────────────────────────────┐
│           index.html (入口)              │
└─────────────────┬───────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────┐
│           main.js (主控制器)             │
│  ┌─────────┐ ┌─────────┐ ┌──────────┐  │
│  │HandTrack│ │Heart3D  │ │GestureCtl│  │
│  │er       │ │         │ │          │  │
│  └────┬────┘ └────┬────┘ └────┬─────┘  │
└───────┼───────────┼───────────┼─────────┘
        │           │           │
        ▼           ▼           ▼
┌─────────────┐ ┌─────────┐ ┌─────────────┐
│MediaPipe    │ │Three.js │ │手势识别逻辑  │
│Hands        │ │WebGL    │ │缩放/旋转控制 │
└─────────────┘ └─────────┘ └─────────────┘
        │           │           │
        └───────────┴───────────┘
                    │
                    ▼
        ┌─────────────────────┐
        │   用户设备摄像头     │
        │   + WebGL渲染       │
        └─────────────────────┘
```

## 部署检查清单

```
部署前检查:
□ 本地开发测试通过
□ npm run build 构建成功
□ dist文件夹包含所有必要文件
□ MediaPipe模型文件已复制到dist
□ 本地预览 (npm run preview) 正常

部署平台选择:
□ GitHub Pages - 适合个人项目，免费
□ Vercel - 适合前端项目，自动部署
□ Netlify - 适合快速部署，拖拽上传
□ 自有服务器 - 适合商业项目，完全控制

部署后验证:
□ HTTPS链接可访问
□ 页面加载正常
□ 摄像头授权弹窗出现
□ 手势识别功能正常
□ 3D爱心渲染正常
□ 缩放和旋转控制正常
□ 移动端适配正常
```
